## ì½”ë“œ ë¶„í• ì´ë€? (Code Splitting)

- í•„ìš”í•œ ì½”ë“œë§Œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ ë²ˆë“¤ì„ ë¬¼ë¦¬ì ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì…ë‹ˆë‹¤.

- ë²ˆë“¤ì˜ ì‚¬ì´ì¦ˆê°€ ë„ˆë¬´ í¬ë©´ ì›¹í˜ì´ì§€ ë¡œë”© ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì½”ë“œ ë¶„í• ì„ í•˜ë©´ ì—¬ëŸ¬ ë²ˆë“¤ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê³  ë¶ˆëŸ¬ì˜´ìœ¼ë¡œì¨ ë¡œë”© ì†ë„ë¥¼ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì½”ë“œ ë¶„í• ì´ í•„ìš”í•œ ê²½ìš°

- íŠ¹ì • ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„œë“œ íŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì „ì²´ë¥¼ `import` í•˜ëŠ” ìƒí™©

- ë¦¬ì•¡íŠ¸ì—ì„œ ì²« í™”ë©´ì„ ë Œë”ë§í•  ë•Œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ìƒí™©

## ë¦¬ì•¡íŠ¸ì—ì„œ ì½”ë“œ ë¶„í•  í•˜ëŠ” ë°©ë²•

- ë¦¬ì•¡íŠ¸ì—ì„œ ì½”ë“œ ë¶„í• ì„ í•˜ëŠ” ë°©ë²•ì€ **Dynamic Import**, ì¦‰ ë™ì  ë¶ˆëŸ¬ì˜¤ê¸° ì…ë‹ˆë‹¤.

- ê¸°ì¡´ì˜ ë°©ì‹ì¸ **Static Import**, ì¦‰ ì •ì  ë¶ˆëŸ¬ì˜¤ê¸°ì™€ ë¹„êµí•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

### Static Import

- ì •ì  ë¶ˆëŸ¬ì˜¤ê¸° ë°©ì‹ì˜ í•œê³„ëŠ” ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

  - ëª¨ë“ˆ ê²½ë¡œì— ë¬¸ìì—´ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. â†’ í•¨ìˆ˜ì˜ ê²°ê³¼ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

  - `import` êµ¬ë¬¸ì€ í•­ìƒ ë¬¸ì„œì— ìƒìœ„ì— ìœ„ì¹˜í•©ë‹ˆë‹¤. â†’ ì½”ë“œ ì¤‘ê°„ì— ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

```jsx
// ModuleAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì „ì²´ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
import ModuleA from "library";

form.addEventListner("submit", (e) => {
  e.preventDefault();
  someFunc();
});

// ModuleAë¥¼ ì‚¬ìš©í•˜ëŠ” someFunc í•¨ìˆ˜
const someFunc = () => {};
```

### Dynamic Import

- ë™ì  ë¶ˆëŸ¬ì˜¤ê¸°ëŠ” `import()`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

- `import()`ëŠ” ëª¨ë“ˆì´ ë‚´ë³´ë‚´ëŠ” ê²ƒë“¤ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ê°ì²´ë¥¼ ë‹´ì€ ì´í–‰ëœ í”„ë¼ë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

- ë˜í•œ `import()`ë¥¼ ì‚¬ìš©í•˜ë©´ ëª¨ë“ˆì„ ì½”ë“œ ì¤‘ê°„ì— ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
// import()ë¥¼ í†µí•´ ì½”ë“œ ì¤‘ê°„ì— ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
form.addEventListner("submit", () => {
  import("library.moduleA")
    .then((module) => module.default)
    .then(someFun())
    .catch(handleError());
});

// ModuleAë¥¼ ì‚¬ìš©í•˜ëŠ” someFunc í•¨ìˆ˜
const someFunc = () => {};
```

---

## React.lazyì™€ Suspense í•¨ê»˜ ì“°ê¸°

- ì½”ë“œ ë¶„í• ì´ ë˜ëŠ” ëŒ€ìƒì€ ì„œë“œ íŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì»´í¬ë„ŒíŠ¸ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤.

- ì›¹ í˜ì´ì§€ë¥¼ ì²˜ìŒ ë Œë”ë§í•  ë•Œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

- `import()`ì™€ ë¦¬ì•¡íŠ¸ì˜ **React.lazy**, **Suspense**ë¥¼ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### React.lazy

- Dynamic Importë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

- ì•ì„œ ì„œë“œ íŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ `import()`ë¡œ ë¶ˆëŸ¬ì˜¨ ê²ƒì²˜ëŸ¼, ì»´í¬ë„ŒíŠ¸ë„ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.

```jsx
const OtherComponent = React.lazy(() => import("./OtherComponent"));
```

### Suspense

- ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ë•Œ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. â†’ **React.lazy + Suspense**

- ë¶„ê¸°ë¡œ ë‚˜ëˆ„ì–´ì§„ ì»´í¬ë„ŒíŠ¸ë¥¼ í•´ë‹¹ pathë¡œ ë¶ˆëŸ¬ì˜¤ë©´ ë¡œë”© ì‹œê°„ì´ ê±¸ë¦½ë‹ˆë‹¤.

- `Suspense` ì»´í¬ë„ŒíŠ¸ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë“œë  ë™ì•ˆ ë¡œë”© í™”ë©´ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

- ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ìŒ€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
// Suspenseë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
import React, { Suspense } from 'react';
// ë™ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ë„ë¡ ì„¤ê³„ëœ OtherComponent
const OtherComponent = React.lazy(() => import('./OtherComponent'));
cost AnotherComponent = React.lazy(()=> import('./AnotherComponent'));

// OtherComponentë¥¼ Suspense ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ ë¡œë“œë  ë™ì•ˆ ë³´ì—¬ì¤„ ë¡œë”© í™”ë©´ì„ ì œê³µí•©ë‹ˆë‹¤.
function MyComponent() {
  return (
    <div>
      <Suspense fallback={<div>Loading...</div>}>
        <OtherComponent />
				<AnotherComponent />
      </Suspense>
    </div>
  );
}
```

### ë¼ìš°í„°ì— ì ìš©í•˜ê¸°

> _ì•±ì— ì½”ë“œ ë¶„í• ì„ ì–´ëŠ ê³³ì— ë„ì…í• ì§€ ê²°ì •í•˜ëŠ” ê²ƒì€ ì¡°ê¸ˆ ê¹Œë‹¤ë¡­ìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì€ ì‚¬ìš©ìì˜ ê²½í—˜ì„ í•´ì¹˜ì§€ ì•Šìœ¼ë©´ì„œ ë²ˆë“¤ì„ ê· ë“±í•˜ê²Œ ë¶„ë°°í•  ê³³ì„ ì°¾ê³ ì í•©ë‹ˆë‹¤. ì´ë¥¼ ì‹œì‘í•˜ê¸° ì¢‹ì€ ì¥ì†ŒëŠ” ë¼ìš°íŠ¸ì…ë‹ˆë‹¤._ -React ê³µì‹ ë¬¸ì„œì—ì„œ ë°œì·Œ

- ë¼ìš°íŒ…ì´ ì ìš©ë˜ëŠ” ê³³ì—ì„œ í•œ ë²ˆì— ì»´í¬ë„ŒíŠ¸ ì½”ë“œ ë¶„í• ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `React.Lazy`ì™€ `Suspense` ì»´í¬ë„ŒíŠ¸ë¥¼ í•¨ê»˜ ì‚¬ìš©í•©ë‹ˆë‹¤.

```jsx
// React.lazyê°€ ì•„ë‹ˆë¼ ì§ì ‘ importí•´ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
import { Suspense, lazy } from "react";
import { BrowserRouter as Router, Routes, Route } from "react-router-dom";

const Home = lazy(() => import("./routes/Home"));
const About = lazy(() => import("./routes/About"));

const App = () => (
  <Router>
    <Suspense fallback={<div>Loading...</div>}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Suspense>
  </Router>
);
```

## â—ï¸ 3ì¤„ ìš”ì•½

- ë²ˆë“¤ì˜ í¬ê¸°ê°€ ì»¤ì§€ë©´ ë¡œë”© ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì½”ë“œ ë¶„í• (Code Splitting)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

- ë¦¬ì•¡íŠ¸ì—ì„œëŠ” `import()`ì™€ `React.Lazy`, `Suspense` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“•Â ì°¸ê³  ìë£Œ

[ì½”ë“œ ë¶„í•  - React](https://ko.reactjs.org/docs/code-splitting.html#reactlazy)

[ë™ì ìœ¼ë¡œ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°](https://ko.javascript.info/modules-dynamic-imports)
